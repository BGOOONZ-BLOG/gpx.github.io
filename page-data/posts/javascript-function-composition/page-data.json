{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/javascript-function-composition/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://www.polvara.me"}},"markdownRemark":{"html":"<p>Around seven years ago (gosh I’m getting old), I started to work on my first\nserious single page application. I was the only frontend developer. A friend of\nmine was working on the backend. Before that, I worked only on small jQuery\nsnippets. Things like “make this button disappear when I click on it”. I didn’t\nstudy JavaScript, I didn’t feel the need to. After all, I knew Java.</p>\n<p>It goes without saying, the project was a mess. A real example of spaghetti\ncode. It was so complicated to understand what was going on that I had to create\na set and a get method. They were two <strong>sync</strong> AJAX calls that were saving a\nvariable in <code class=\"language-text\">$_SESSION</code> and getting it back. All because I couldn’t figure out a\nway to access values from different sections of my codebase.</p>\n<p>After this terrible experience, I realized JavaScript might not be just a light\nversion of Java. I started <em>googling</em> for some good material for a beginner like\nme. Almost everyone’s advice was to read\n<a href=\"http://shop.oreilly.com/product/9780596517748.do\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">“Javascript: The Good Parts”</a>.\nThe author, <a href=\"https://www.crockford.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Douglas Crockford</a>, remained ever since\na guru for me. He often says:</p>\n<blockquote>\n<p>If a feature is sometimes useful and sometimes dangerous, and if there is a\nbetter option then, always use the better option.</p>\n</blockquote>\n<p>You can see this motto applied to his code, his style is unambiguous and easy to\nfollow, although it may appear verbose.</p>\n<p>What does this have to do with <em>function composition</em> you might ask. Fast\nforward to one year ago. I saw this talk from Douglas about “The Better Parts”.</p>\n<p>\n        <div class=\"embedVideo-container\">\n            <iframe\n              width=\"560\"\n              height=\"316\"\n              src=\"https://www.youtube.com/embed/bo36MrBfTk4?rel=0\"\n              class=\"embedVideo-iframe\"\n              style=\"border:0\"\n              allowfullscreen\n            ></iframe>\n        </div></p>\n<p>With ES6 coming he decided to give an update on what are the new “good parts”. I\nwas very much into <code class=\"language-text\">class</code> back then, like many others, so I couldn’t wait to\nhear my guru explain how and why they’re so cool.</p>\n<p>With my great surprise they weren’t in the list. He mentioned things like\n<a href=\"../es6-tail-call-optimization\">tail call optimization</a> and\n<a href=\"https://github.com/lukehoban/es6features#default--rest--spread\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">spread</a> but not\nclasses.</p>\n<p>He eventually talked about the class keyword, it was the first of the new <em>bad\nfeatures</em>.</p>\n<h2>A Crazy Little Thing Called Functional Programming</h2>\n<p>That talk left me puzzled. Not only he wasn’t using classes, he wasn’t using\n<code class=\"language-text\">this</code>, <code class=\"language-text\">new</code>, <code class=\"language-text\">for</code> loops and pretty much what was 80% of my code. He was even\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">freezing objects</a>\nafter creating them.</p>\n<p>What’s the deal Doug? Why are you trying to make my life a hell? Are you just\nmocking me? Are you mocking us all? It was a prank talk, wasn’t it? The guru\ndecided to have some fun at the expense of his followers.</p>\n<p>Turns out it wasn’t a prank.</p>\n<p>While in university, I attended a course about functional programming. The mood\nwas this:</p>\n<blockquote>\n<p>There’s a programming language called\n<a href=\"https://en.wikipedia.org/wiki/Lisp_(programming_language)\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Lisp</a>. We use it\nin academia but in the real world no one does. You’re going to learn enough of\nit to build a small program and pass the exam.</p>\n</blockquote>\n<p>Damn I hated school.</p>\n<p>Lisp may not be in much use nowadays, but it influenced languages that are\ntaking the world by storm, such as <a href=\"http://clojure.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Clojure</a> and\n<a href=\"https://www.haskell.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Haskell</a>.</p>\n<p>Most importantly, its functional paradigm is going to be more and more\npredominant in the foreseeable future.</p>\n<p>Oh and by the way, do you know what’s the most popular functional language by a\nvast margin? JavaScript.</p>\n<p>All this just to tell you that we better learn function composition and other\nfunctional idioms.</p>\n<h2>Finally Some Function Composition</h2>\n<p>After my longest introduction yet, let’s get into function composition. First\noff, function composition works at its best when we <em>curry</em> a function. What’s\nthat? Glad you asked.</p>\n<h3>Currying</h3>\n<p><a href=\"https://en.wikipedia.org/wiki/Haskell_Curry\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Haskell Curry</a> was a great\nmathematician. So great that they named a programming language after his first\nname and a programming technique after his last name (sadly nothing yet on his\nmiddle name “Brooks”).</p>\n<p>Let’s say you have a function sum that takes two parameters a and b and returns\ntheir sum.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> 3</span></code></pre></div>\n<p>If the code above looks weird to you it’s because we’re using ES6, in particular\n<a href=\"http://es6-features.org/#Constants\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">constants</a> and\n<a href=\"http://es6-features.org/#ExpressionBodies\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">arrow functions</a>.</p>\n<p>In ES5, this would translate to:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>When we call sum we have to provide 2 arguments. We also have to provide them at\nthe same time. What if I want to set a now and b later?</p>\n<p>Basically, what we want is this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> partial <span class=\"token operator\">=</span> <span class=\"token function\">currySum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">partial</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> 3</span>\n\n<span class=\"token function\">currySum</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> 10</span></code></pre></div>\n<p>How is this new <code class=\"language-text\">currySum</code> defined? This is one way to do it:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">currySum</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">currySum</code> is a function that takes one argument a and returns a function. The\nreturned function accepts an argument <code class=\"language-text\">b</code> and returns <code class=\"language-text\">a + b</code>. This is possible\nthanks to\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">closures</a>.</p>\n<p>How is this useful? Take our <code class=\"language-text\">partial</code> function, it could be renamed to <code class=\"language-text\">plus1</code>.\nIt is in fact a function that takes a number and adds 1 to it. We can easily\ndefine <code class=\"language-text\">plus2</code> or <code class=\"language-text\">plus10</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> plus2 <span class=\"token operator\">=</span> <span class=\"token function\">currySum</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> plus10 <span class=\"token operator\">=</span> <span class=\"token function\">currySum</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Note that we can also convert a function to its curried version. Libraries like\n<a href=\"https://lodash.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">lodash</a> implement a curry method. We are going to use\n<a href=\"http://ramdajs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ramda</a>. Let’s see it in action.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> currySum <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span>sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">currySum</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> 5</span>\n<span class=\"token function\">currySum</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> 5</span></code></pre></div>\n<p>As you can see <code class=\"language-text\">R.curry</code> takes a function and returns its curried version. The\nnice thing is that we can then call the function passing all the arguments or\njust some.</p>\n<h3>Function Composition</h3>\n<p>Suppose you have this array:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> colleagues <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"Marek\"</span><span class=\"token punctuation\">,</span>\n    developer<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"Tim\"</span><span class=\"token punctuation\">,</span>\n    developer<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"Jan\"</span><span class=\"token punctuation\">,</span>\n    developer<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now, you want a list of uppercased names.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> colleagues<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> i<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  names<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>colleagues<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nnames<span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> ['MAREK','TIM','JAN']</span></code></pre></div>\n<p>Can we do better?</p>\n<p>Let’s divide the problem. First we need a function that takes a string and\nreturns its uppercased version.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toUpper</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">toUpper</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> 'HELLO'</span></code></pre></div>\n<p>Next we need a function that takes an object and returns one of its properties.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">prop</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">prop</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">\"Giorgio\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> 'Giorgio'</span></code></pre></div>\n<p>We’re interested in the <code class=\"language-text\">name</code> property. What we need is a function that given\nan object returns it’s <code class=\"language-text\">name</code>. If we curry our <code class=\"language-text\">prop</code> function that’s very easy.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> prop <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getName <span class=\"token operator\">=</span> <span class=\"token function\">prop</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Wow, look at that. We called <code class=\"language-text\">prop</code> with just one argument and we got back\nanother function that receives an object and returns this object’s <code class=\"language-text\">name</code>\nproperty. Now you begin to see why curring is so important.</p>\n<p>Before we move on, you need to know that Ramda implements the two functions we\njust defined. Furthermore Ramda functions are curried by default. So we can\nrefactor our code like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> toUpper <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span>toUpper<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> getName <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">prop</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Here comes the interesting part, given an object we want to get its <code class=\"language-text\">name</code>\nproperty and uppercase it. One naïve solution is this.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">upperName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> obj<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">upperName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">\"Giorgio\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> 'GIORGIO'</span></code></pre></div>\n<p>But this function is solving two problems we already solved:</p>\n<ul>\n<li>Getting the name property</li>\n<li>Uppercase a string</li>\n</ul>\n<p>How can we do this using our pre-defined functions?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">upperName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">toUpper</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Amazing, we composed the functions. We can now look at the official definition\nfor function composition (obviously from Wikipedia):</p>\n<blockquote>\n<p>In mathematics, function composition is the pointwise application of one\nfunction to the result of another to produce a third function.</p>\n</blockquote>\n<p>This is exactly what we did. We took the output of <code class=\"language-text\">getName</code> and used it as an\ninput for <code class=\"language-text\">toUpper</code>.</p>\n<p>Ramda has a <code class=\"language-text\">compose</code> function just for that. We can use it to refactor our\ncode.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> upperName <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">compose</span><span class=\"token punctuation\">(</span>toUpper<span class=\"token punctuation\">,</span> getName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">upperName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">\"Giorgio\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> 'GIORGIO'</span></code></pre></div>\n<p>You should read the code from right to left. An object enters, it gets processed\nby <code class=\"language-text\">getName</code>, you get a string and feed it to <code class=\"language-text\">toUpper</code>, you get a result.</p>\n<p>Now to get the list of uppercased names from our objects we simply use <code class=\"language-text\">map</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> upperNames <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>upperName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">upperNames</span><span class=\"token punctuation\">(</span>colleagues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> ['MAREK','TIM','JAN']</span></code></pre></div>\n<p>Here is the whole code. I also made a\n<a href=\"http://codepen.io/Gpx/pen/YybPGV?editors=001\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pen</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> colleagues <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"Marek\"</span><span class=\"token punctuation\">,</span>\n    developer<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"Tim\"</span><span class=\"token punctuation\">,</span>\n    developer<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"Jan\"</span><span class=\"token punctuation\">,</span>\n    developer<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getName <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">prop</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> toUpper <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span>toUpper<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> upperName <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">compose</span><span class=\"token punctuation\">(</span>toUpper<span class=\"token punctuation\">,</span> getName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> upperNames <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>upperName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> names <span class=\"token operator\">=</span> <span class=\"token function\">upperNames</span><span class=\"token punctuation\">(</span>colleagues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> ['MAREK','TIM','JAN']</span></code></pre></div>\n<h2>Is It worth It?</h2>\n<p>If you are like me you are probably asking yourself “Is it worth it?”. After all\nthe original code with a <code class=\"language-text\">for</code> loop was easy enough. The solution with function\ncomposition works but it may seem a bit awkward. Let me tell you two big\nadvantages of our functional version.</p>\n<p>The code has a higher level of abstraction. You have a <code class=\"language-text\">upperName</code> function.\nWhat does it do? It applies <code class=\"language-text\">getName</code> and <code class=\"language-text\">toUpper</code>. No need to know about\narrays or indexes.</p>\n<p>It’s much easier to extend. Want to upper the name only for developers?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Takes an array and filter out non-developers</span>\n<span class=\"token keyword\">const</span> onlyDevelopers <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">prop</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"developer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Takes an array returns an array of uppercased names</span>\n<span class=\"token comment\">// only for developers</span>\n<span class=\"token keyword\">const</span> upperDevelopers <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">compose</span><span class=\"token punctuation\">(</span>upperNames<span class=\"token punctuation\">,</span> onlyDevelopers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">upperDevelopers</span><span class=\"token punctuation\">(</span>colleagues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//=> ['MAREK','TIM']</span></code></pre></div>\n<p>Here we solved the issue with another function composition.</p>","timeToRead":8,"frontmatter":{"title":"JavaScript Function Composition","cover":{"file":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='267'%20viewBox='0%200%20400%20267'%20preserveAspectRatio='none'%3e%3cpath%20d='M0%202l1%202v2c0%202%200%202%201%201%202-1%203-1%209%204%2011%209%2019%2025%2019%2041l2%2011-1%204c-2%200-3%204-4%2011a119%20119%200%2001-1%2014c0%202%200%203-2%203l-2%201-2%202c-2%201-1%201%202%201l4%205-1%201-3-2-2%201%202%202%203%201%202%201%2010%204%2014%207c11%205%2013%2010%206%2013l-2%202c3%200%2010-4%2010-5l-1-1v-1c1-1%200-2-1-3-2-1-2-2-1-2l2%202%202%201c1%200%201-5-1-6-1-1-3-7-4-15l-1-6v5l1%208v4l-3-4c-9-10-9-11-10-25l-1-13v12c0%209-1%2011-2%2011l-1%201%201%201c1%200%203%205%203%208l-1%204c0%202-2%200-2-2l-2-4c-2-2-3-10-2-12V73l-2-4c-4-3-4-3-4-10%200-5%200-7-1-6-2%200-3-9-2-14%200-2%200-2-1%200v-1c1-7-11-25-23-34-7-5-8-5-8-2m383%2070l-2%201-1%2010a1759%201759%200%2000-4%2029l-1%202-2%204c-2%202-2%203-2%2020v17h-9l-13%201a26583%2026583%200%2001-127%200l-5-1c-10-1-11-2-10-6%200-3%201-3%203-3l8-1%2010-1c7%200%208-2%202-5-7-3-10-3-16-1-8%203-8%203-8-3%200-4%200-5-2-6-1%200-4%201-2%202v8c-2%201-2%201-8-1-8-2-12-2-18%204-4%202-3%203%202%202l8%201%209%201c3%200%204%201%205%204l1%204h-8l-8-1c-7-1-7-1-9%202l-3%201%201-3c1-1%201-1-1-1l-3-1-18-1-22-2-11-1-1-3a194%20194%200%2001-3-29v30l1%202c2-1%200%204-2%208-2%203-3%201%200-3v-5l-1-1c-1%200-3-9-3-17l-2-4-2-7-2-8%201%2010c3%2016%204%2022%201%2022-2%201-4-1-4-3l-1-2-2-1-1-1c-1%200-2-1-1-2h-2l-16-1-1%201c-1%201%200%201%201%201l2%201h-3l-2%201c1%202-1%203-6%205-7%202-11%203-6%200l4-1-4%201a267%20267%200%2001-33%201l-2-2c-2%200-3-1-4-5l-2-4H11l-11%201v32h21v32a355%20355%200%20000%2027l-9-1c-7-1-8-1-10%201-6%206-1%2012%2012%2014%204%200%208%203%206%204-1%201-1%201%201%202%206%202%207%206%202%206l-14%203-5%201-4%201v13h110l4-4%205-7%203-3%201-1%202-9%203-11%205-8c9-10%2014-27%2012-37-1-5-1-5-1-2%200%207-2%207-7%203-4-3-10-6-7-3v3h1c1-1%202%200%202%201v1l-1%201c2%202%200%207-2%208-2%200-3%202%200%202v1c-3%202-4%201-4-1v-1c-2%202-2%202-6-2-5-5-5-5%201-4l4%202h3c2-1-6-8-9-8l-3-1v-1l1-1-1-1c-2%200-2-1-2-3%200-3%201-4%208-1%202%200%202%200%201-1v-2l1-1-1-2-2-1c0-2%204%200%206%203l3%204%203%201%203%202-7-7c-4-5-7-7-7-6h-1c0-2%203-3%206-1l8%201h5l-3-2h-5c2-2%202-2-4-2-8%201-8%200-9-7%200-6%201-8%204-8l-1%201c-2%201-1%201%2023%2011a592%20592%200%2000226%2040%20386%20386%200%20011%2053v10l-4-1-6-2-6-2c-4%200-5-1-5-3%200-3-11-8-17-8a215%20215%200%2001-18%203l-4%201c-1-1-13%202-15%203l-4%201-2%201h-8l-13%201-7%201c-1-1-1-1-1%201l-3%201-3%202c-1%202-1%202%2072%202h72v-66c1-77%201-77-3-77l-2-1h6V98l-1-26h-17M1%20117v7h3l6-1%206-2c5-1%205-1%204-5-2-5-5-7-13-7H1v8m394%2011v1l1%203-1%203c-1-1-2%200-3%201h-1v-3l-5-5%201%202v1l-2%203c1%202-1%204-1%202l-1-4v-2l-1%202c0%203-4%206-4%203l-1%202c-1%203%200%203%206%204l3%201%207%201h7v10l1%2010a135%20135%200%2000-1-27c0%205-1%206-4%204v-14l-1%202M56%20144l-13%201-11%202-2%201v2l3%202%201%201c0%201%204%202%205%201l4-2%202-2%208-4%207-3-4%201m50%209c-2%201-2%203-2%205%200%205-1%205-10%205-5-1-8-2-10-4l-3-1%203%2016v2l-1%202c-2%200-1%202%201%203%202%200%203%201%203%2011%201%2015%202%2021%203%2021l1%201c-1%202%207%2010%208%209l1%201c-2%203%203%201%206-2l4-4v-2l4-2%202-2%201-1%202-3%201-3-1-2%202%201h1c1-1-1-3-7-6-4-2-4-3-4-6%200-4-2-6-6-6l-4-1c-1-1%200-1%204-1l6%201v-9l-2-25-3%202m22%200a388%20388%200%200096%2032c2%201%207%203%2012%203l20%203c2%202%205%202%2027%204l10%202a455%20455%200%200077%203l1-16%201-19v-2l-1-1h-49l-65-2a690%20690%200%2000-94-2l-18-2-17-3m-95%204l-6%201c-4%200-4%200-3%202%202%201%202%201%201%202l-1%2016%201%2019c0%204%201%204%206-2%204-3%206-4%208-3%202%200%202%200%201-2l-1-17c0-13-1-14-3-16h-3m22%209c-2%201-3%201-3%207v6h3c3%200%2010-2%2010-4h-2c-3%201-3%201-3-4%200-6%200-6-5-5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.5007215007215007,"src":"/static/605ddb6c249828e96b1357db7b4519c8/ba537/cover.jpg","srcSet":"/static/605ddb6c249828e96b1357db7b4519c8/d5c54/cover.jpg 1040w,\n/static/605ddb6c249828e96b1357db7b4519c8/f734f/cover.jpg 2080w,\n/static/605ddb6c249828e96b1357db7b4519c8/ba537/cover.jpg 4160w,\n/static/605ddb6c249828e96b1357db7b4519c8/b857d/cover.jpg 4608w","srcWebp":"/static/605ddb6c249828e96b1357db7b4519c8/12eb1/cover.webp","srcSetWebp":"/static/605ddb6c249828e96b1357db7b4519c8/e4875/cover.webp 1040w,\n/static/605ddb6c249828e96b1357db7b4519c8/ecdd3/cover.webp 2080w,\n/static/605ddb6c249828e96b1357db7b4519c8/12eb1/cover.webp 4160w,\n/static/605ddb6c249828e96b1357db7b4519c8/7b295/cover.webp 4608w","sizes":"(max-width: 4160px) 100vw, 4160px"}}},"author":"Tyler Wanlass","link":"https://unsplash.com/photos/L7MpmBGpM94","alt":null}},"fields":{"slug":"/posts/javascript-function-composition/"}}},"pageContext":{"slug":"/posts/javascript-function-composition/"}}}