<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.835962e22f0584898860.css">*,:after,:before{box-sizing:border-box}::selection,:not(pre) code[class*=language-]::selection{background:rgba(3,169,244,.2)}html{font-size:19px}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;color:#333;line-height:1.5;margin:0}a{text-decoration:none;color:currentColor}code[class*=language-],pre[class*=language-]{font-family:Ubuntu Mono,monospace;font-size:.9em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:hsla(0,0%,100%,.13)}pre[class*=language-]{padding:1em;margin:0 0 .5em;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1e272e;border-radius:0 0 .5em .5em;color:#d2dae2}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:rgba(0,0,0,.07);color:inherit}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#808e9b;font-style:italic}.token.punctuation{color:#808e9b}.namespace{color:red;background:red}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#ffa801}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#0be881}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#ffd32a}.token.atrule,.token.attr-value,.token.keyword{color:#ef5777}.token.class-name,.token.function{color:#0fbcf9}.token.important,.token.regex,.token.variable{color:#0be881}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.gatsby-highlight-code-line{background:#2f3d48;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #575fcf}.gatsby-highlight:before{content:attr(data-language);display:block;padding:.3em 1em;font-size:.9em;text-transform:uppercase;text-align:right;background-image:linear-gradient(90deg,#7986cb,#3f51b5);color:#fff;font-family:Ubuntu Mono,monospace;border-radius:.5em .5em 0 0}.gatsby-highlight[data-language=html]:before{background-image:linear-gradient(90deg,#ffb74d,#ff9800)}.gatsby-highlight[data-language=text]:before{content:" ";white-space:pre;background-image:linear-gradient(90deg,#dce775,#cddc39)}.gatsby-highlight{border-radius:.5em;box-shadow:2px 2px 3px 2px rgba(0,0,0,.2);margin:2em 0}article{margin-bottom:4em;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;hyphenate-limit-chars:6 3 2;hyphenate-limit-lines:2;hyphenate-limit-last:always;-webkit-text-decoration-skip:ink;text-decoration-skip-ink:auto}article h1{font-size:2rem;margin:1.5em 0;text-align:center;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}article h2{text-align:left;font-size:1.3rem;margin:2em 0 1em}article p:first-child:first-line{font-weight:600}article a{text-decoration:underline}article figure{margin:auto auto 3em;text-align:center}article img{max-width:100%}article figcaption{text-align:center;font-style:italic}hr{border:none;border-radius:50%;margin:2em auto}hr,hr:after,hr:before{height:3px;width:3px;background:rgba(0,0,0,.67)}hr:after,hr:before{position:absolute;content:"";display:inline-block;border-radius:50%;padding:0}hr:before{transform:translateX(-1em)}hr:after{transform:translateX(1em)}article .highlight{text-align:left;-webkit-hyphens:initial;-ms-hyphens:initial;hyphens:manual;font-size:1.3em;color:#666;margin:1.7em;font-weight:100;padding-bottom:.5em;border-bottom:3px solid #3f51b5}article ul{text-align:left;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}article li{margin-bottom:.5em}details.tldr{border:1px solid rgba(0,0,0,.2);padding:.4em 1em;margin-bottom:4rem}details summary{cursor:pointer}twitter-widget{margin:2em auto!important}blockquote{text-align:left;-webkit-hyphens:initial;-ms-hyphens:initial;hyphens:manual;margin:2em auto;max-width:80%;font-size:1.2em;font-style:italic}blockquote p:first-child:first-line{font-weight:400}</style><meta name="generator" content="Gatsby 2.20.23"/><title data-react-helmet="true">Testing a Custom Select with React Testing Library</title><meta data-react-helmet="true" property="og:title" content="Testing a Custom Select with React Testing Library"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:url" content="https://www.polvara.me/posts/testing-a-custom-select-with-react-testing-library/"/><meta data-react-helmet="true" property="og:image" content="https://www.polvara.meundefined"/><style data-styled="" data-styled-version="5.1.0">.fscSeJ{display:block;max-width:500px;margin:auto;margin-top:3em;box-shadow:2px 2px 3px 2px #0003;padding:2em 2.5em;text-align:center;-webkit-transition:-webkit-transform 0.2s;-webkit-transition:transform 0.2s;transition:transform 0.2s;border-radius:6px;}/*!sc*/
data-styled.g1[id="newsletter-form__Card-a2ms4a-0"]{content:"fscSeJ,"}/*!sc*/
.eyKXbm{color:red;}/*!sc*/
data-styled.g2[id="newsletter-form__Button-a2ms4a-1"]{content:"eyKXbm,"}/*!sc*/
.KHPza{margin:0;font-size:1.6em;font-weight:500;line-height:1;}/*!sc*/
data-styled.g4[id="newsletter-form__Title-a2ms4a-3"]{content:"KHPza,"}/*!sc*/
.dYhHPN{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-top:2em;}/*!sc*/
.dYhHPN label{text-align:left;margin-bottom:0.3em;}/*!sc*/
.dYhHPN [type="email"]{font-size:1.3em;border:1px solid #333;padding:0.3em 0.6em;border-radius:6px;margin-bottom:0.5em;}/*!sc*/
.dYhHPN [type="submit"]{background:#3a6;border:none;font-size:1.3em;padding:0.6em;color:#fff;text-shadow:1px 0 1px #0004;border-radius:6px;cursor:pointer;}/*!sc*/
data-styled.g6[id="newsletter-form__InputGroup-a2ms4a-5"]{content:"dYhHPN,"}/*!sc*/
.jBIpkR{margin-top:4em;padding:3em 0.5em;text-align:right;background:#3a6;color:#fff;text-shadow:1px 0 1px #0004;}/*!sc*/
data-styled.g7[id="footer__Container-sc-1abtvul-0"]{content:"jBIpkR,"}/*!sc*/
.ihWmWm{max-width:calc(65 * 9px);margin:auto;}/*!sc*/
.ihWmWm > *{margin:0.7em;}/*!sc*/
.ihWmWm > *:first-child{margin-left:0;}/*!sc*/
.ihWmWm > *:last-child{margin-right:0;}/*!sc*/
data-styled.g8[id="footer__Content-sc-1abtvul-1"]{content:"ihWmWm,"}/*!sc*/
.bcrfyt{max-width:calc(65 * 9px);margin:auto;font-size:0.85em;margin-top:1em;}/*!sc*/
data-styled.g9[id="footer__Copy-sc-1abtvul-2"]{content:"bcrfyt,"}/*!sc*/
.cCMnR{padding:0 0.5em;max-width:calc(65 * 9px);margin:auto;}/*!sc*/
data-styled.g10[id="layout__Container-sc-4dh0yk-0"]{content:"cCMnR,"}/*!sc*/
.fsQVfs{display:block;font-weight:500;font-size:1.5rem;text-align:center;padding:0.5em 0;color:#fff;text-shadow:1px 0 1px #0004;-webkit-text-decoration:none;text-decoration:none;width:100%;background:#3a6;}/*!sc*/
data-styled.g20[id="post-header__Title-sc-1okepgc-0"]{content:"fsQVfs,"}/*!sc*/
.jOkvKZ{display:block;font-size:0.45em;font-weight:400;color:#666;margin-top:0.5em;}/*!sc*/
data-styled.g21[id="blog-post__Meta-sc-7gkdnd-0"]{content:"jOkvKZ,"}/*!sc*/
.duvUWk{font-size:0.85rem;text-align:center;margin-bottom:3rem;padding:0.5em 0;background:#e8eaf6;}/*!sc*/
.duvUWk a{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g22[id="blog-post__Footer-sc-7gkdnd-1"]{content:"duvUWk,"}/*!sc*/
</style><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/ubuntumono/v9/KFOjCneDtsqEr0keqCMhbCc6CsQ.woff2"/><style type="text/css">@font-face{font-family:'Ubuntu Mono';font-style:normal;font-weight:400;src:local('Ubuntu Mono'),local('UbuntuMono-Regular'),url(/google-fonts/s/ubuntumono/v9/KFOjCneDtsqEr0keqCMhbCc6CsQ.woff2) format('woff2'),url(/google-fonts/s/ubuntumono/v9/KFOjCneDtsqEr0keqCMhbCc6CsI.woff) format('woff');font-display: swap;}</style><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-109c4be61e355b7b21f8.js"/><link as="script" rel="preload" href="/framework-c88d07efb40e009babfb.js"/><link as="script" rel="preload" href="/app-04a92f08d6fc44f9844d.js"/><link as="script" rel="preload" href="/styles-b729c27faa6284e9ff45.js"/><link as="script" rel="preload" href="/cd7d5f864fc9e15ed8adef086269b0aeff617554-b178ff70968fed9b073a.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-823b0b2f1756e4d4d7a7.js"/><link as="fetch" rel="preload" href="/page-data/posts/testing-a-custom-select-with-react-testing-library/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><a class="post-header__Title-sc-1okepgc-0 fsQVfs" href="/">Giorgio Polvara&#x27;s Blog</a><div class="layout__Container-sc-4dh0yk-0 cCMnR"><article lang="en"><h1><span>Testing a Custom Select with React Testing Library</span><span class="blog-post__Meta-sc-7gkdnd-0 jOkvKZ">Approximately <!-- -->3<!-- --> min read</span></h1><figure><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:66.63461538461539%"></div><img aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20width=&#x27;400&#x27;%20height=&#x27;267&#x27;%20viewBox=&#x27;0%200%20400%20267&#x27;%20preserveAspectRatio=&#x27;none&#x27;%3e%3cpath%20d=&#x27;M20%201l-1%2016-3%2016-2-2c-1-2-1-3%201-4v-1l-1-3%201-3v-5l1-3c0-3%200-3-1-2s-1%201-1-1l-2%207-5%2019C1%2062%201%2064%203%2065c1%200%202-1%201-3-1-5%203-9%2011-10h2l2%201%204-1%2014-7c9-5%2019%203%2016%2014-1%203-1%203-7%202-5%200-7%200-8-2-1-1-1-1-1%201%200%204-2%207-5%209s-3%202-1%202l4%202c2%201%202%201%201-2-1-8%2011-11%2015-4%201%203-1%2011-4%2014s-6%203-6%200l-1-4c-2-1-2-1-1%202l-1%204c-1%201-1%201%202%202s6%206%204%207l-1%204c0%204-2%207-5%207-2%200-2%200%200%201%204%201%205%203%205%208%201%207-1%2010-6%2012-2%201-3%202-3%205s-1%204-4%205c-4%202-17%203-17%201l1-1%201-3c0-5%204-10%208-11l2-1-1-3c0-2%200-2-2%200l-5%204c-3%201-4%201-4%206v6l-3%202-3%202v1l3%201%207%202c4%202%205%203%206%202l3-1-2%202c-2%201-1%201%204%201%207-1%207-1%207%202%200%209-4%2015-11%2015s-10-7-6-13c2-3%200-2-5%202l-4%205%203%201c3%202%204%204%201%207-2%203-1%203%204%202s11-1%2014%202c1%202%201%2010-1%2013-1%202-13%208-15%208-1%200-6-11-6-14v-4l-4%201H1l-1%201%202%201c4%200%205%201%206%206%202%207%201%209-4%209-3%200-4%200-4%202l4%201%204%201c0%202-5%2011-7%2012l-1%2016c0%2010%200%2015%201%2014%201-2%201-2%202%200l3%203c3%200%203%201%204%206v7c-1%201%207%202%2014%202%203%200%204%200%203-2-2-2-3-2-3-1l-6%201c-5%200-6-1-2-1%204-1%207-3%207-5l1-1v2c0%202%200%202%201%201v-5c-1-4%200-9%201-9l1-1c-1-2%201-4%204-3%202%200%202%200-1-3s-4-5-2-10c2-4%207-7%2012-6l6-1c2-1%202-1-1-3-8-3-3-13%208-14l8-2c3%200%204%201%201%203l-3%205c-1%205-2%207-5%208l-2%201%203%201c6%202%207%204%208%2011%200%205%200%206-3%2010-3%205-3%206%202%204%203-2%205-1%207%201h2l-3-4c-4-2-5-4-2-10%201-6%203-8%209-9%204-1%204-1%207%202l3%204c0%203-3%209-6%2011l-2%204-2%203-1%202c2%202%201%204-2%209l-2%205h8c2%201%202%201%200%201l-2%201h2l10-1%202-1c-1-1%201-1%205-1%207%200%207%200%204-6-2-4-3-5-6-5-6%200-9-9-5-16%202-2%202-3%201-5l-1-2%202%201%205%201h3l-3-2c-4-1-5-4-5-8%201-5%203-6%2010-10l7-3c1-2%202-1%201%203s-1%204%202%204c2%200%202-1%200-6-1-3%208-7%2010-4h3l-1%202c-1%200-2%201-2%203l-3%203-3%202%203%202c9%205%206%2018-5%2022-6%202-5%205%202%204l4%201c9%204%202%2020-9%2020-5%200-5%200-4%202%201%201%204%202%204%200h3c5%201%2010%202%2011%201h5c1%201%201%201-15%202a878%20878%200%2000-45%203l12%201%208%201h2c2-2%204-2%204-1h4l6-1c3-1%203-1%204%201h6c4-1%2010%200%2010%201h3l9-1c2%200%203-1%203-2l-1-1-1-2c0-2%200-2-3-1-2%201-3%201-2-1%200-2%201-2%206%200h9l8-1%206%201-1%201%201%202h-14l-4%201c-2%200-3%200-2%201%200%202%208%202%2013%201h21l17%201c0%201%202%201-45%202a3677%203677%200%2000-139%206%2020408%2020408%200%2000392%200v-8l-90%201a490%20490%200%2001-86-2c0%201%2027%201%2039-1h20l6-1%208-1h3c1-1%202%200%203%201h5l2-1h26c2%200%202%200%201-2l-5-1h-7l-3%201h-1l-35-1h-19c-1-2%201-2%206-2l7-2%202%201c-1%201%200%201%201%201%202%200%203-2%201-2-1-1-1-1%201-1l2%201c1%202%208%202%2013%201l4-1h-4c-7%200-1-2%207-2%205%200%206%200%206%202l3%201h6c3%200%203%200%201-1-1-1-1-1%202-1l2%201v1l2-1%202-1v1c-1%201%200%201%204%201%202%200%204%200%202-1-3%200-7-5-7-8v-2l1%203c2%204%206%205%2012%205h2a63%2063%200%200025%200c5%200%205%200%205-2-1-2%200-2%203-2l3%201h1l1-2v-2l-1-1c-1%201-1%200-1-2l-1-1c-1-1-1-1%201-1l4-2h5l1%202c1%200%202%204%201%206l-1%201-2%201h-2l-1%201%202%201%201%201h-2l-1%201h14l-2-2c-2%200-3-2-3-3l2%201%203%202v-6c2-13%201-34-1-34v-2l1-2-2%201h-2l-1-2-3-1c-2-2-2-3-1-3l3%201c2%202%206-1%206-4v-61c0-67%200-62-1-62v-1l1-44V0H265C138%200%20130%200%20133%202l3%203c-1%202%200%203%201%204%203%204%201%2013-3%2014v2h4c-1-3%202-8%205-9l4-1h-3c-3-1-5-5-4-7V6c-2-1%200-3%204-4s7%202%207%208l-1%206c-2%200-2%200%200%202%203%204%201%2015-4%2014-3%200-3%201-3%203%200%203-1%204-8%206-7%201-12%200-12-3%200-2%200-2-2%200-6%207-15%200-15-11l1-5v-2c-3-6%201-11%208-11%204%200%204%200%204-2l2-5%202-2h-19L88%201c4%200%205%202%203%205-2%201-3%207-2%208l1%204v4l3-3%204-3-3-3c-4-3-4-5-1-7%205-5%2014-2%2012%204v10c-1%208-2%2013-6%2014l-2%201-1%201-2-1-2-4-2-5v-2l-3%202-3%203%203%201c2%201%205%207%204%208l-4%201-3%201%207%201c7%200%208%200%2010%202%202%204%201%207-4%2010l-3%201%202%201%203%202%201%203c1%207%201%209-1%2011-1%201-3%202-4%201l-1%203c1%203-1%208-2%208a584%20584%200%2001-15%202l7%203c3%202%203%202%202%205l-4%204c-3%201-3%201-2%203l2%204c1%202%201%201%201-2s0-4%202-5c4%200%209%203%2010%207l1%204c0%202-2%204-4%203-3%200-2%200%202%205%202%203%203%208%201%2011-1%203-7%205-11%205l-4%201h-2c-2%200-2-1-2-9v-8l-2%201c-2%201-2%201-1%203%204%206%200%2013-7%2013l-3%201c1%201-6%202-10%201-2%200-2%200%200%201%201%201%201%201-1%201-3%201-7%200-7-2l5-1%208-1c2-1%200-1-6-1-9%201-10-1-4-3%207-3%2011-8%206-8-8%200-11-7-7-15%201-2%202-4%201-5-2-1-1-2%202%200l5%201%202%201h1c2-2%201-3-2-2-3%200-7-4-6-7%201-5%204-6%2011-7%207%200%2013-1%208-2l-5-1c-3-1-7-6-6-9l-2-4c-4-3-4-10%200-13%202-1%203-3%202-3l-2-4c-1-6%208-10%2015-6l3%202v-3l3-3c2%200%202%200%201-1-2-2-1-7%201-9s2-2%200-2l-5-3c-2-2-4-3-5-2l1%202c4%201%206%205%206%208-1%204-12%209-16%206-3-2-5-16-1-16l1-3v-5c1-3%209-6%2010-5l2%201c2-2%200-4-3-4-4-1-3-3%201-3l3-2c2-2%201-3-3-2l-2%201%201%201H52l-6-1c-3%201-4%200-4-1H20m155%2030l-2%204-1%201v2h2l1%201h8c5-4%205-6%204-8-3-3-10-3-12%200m36%207l-4%202c-3%201-4%203-5%205-1%206%200%207%205%206%205%200%209-2%209-5l-1-2c-1%201-2-3-2-4l-1-2h-1m32%202c-1%201-2%202-3%201-2%200-1%204%202%206v3l1%202-1%202c-2%201%203%205%206%205l4%202%202%203v-3l-2-9c0-9-7-17-9-12m-103%203c-7%203-4%2013%205%2013%204%200%204%200%206-2%204-8-4-16-11-11m-25%203c-2%202-2%204%201%204%202%200%202%201%202%205v6l-1-4c-1-3-2-5-4-5l-2-2c0-2-4-1-5%201-4%208-4%209-3%2013%201%202%202%204%204%204l3%202-3%201-4%201-1%201%201%201%202%202c1%205%209%208%2011%204h1l2%202%202%201-1%201-2%203-2%202c-2%200-3-2-1-4s0-2-3%200l-4%202h-1c-1-1-5%200-7%202-2%203-1%206%202%209l1%203-2-1c-2-3-3-2-3%207%200%2010%201%2012%206%2014%203%201%204%202%205%204%202%205%204%206%2010%205l8-2h4c5%204%2013%202%2016-3%203-6%201-12-4-15l-3-2h3c4%200%204%200%204-4%201-3%201-5-1-7-2-4-3-4-7-1l-4%202c-1%200-3%207-2%208%200%201%201%202%203%202h3l-3%202c-5%202-7%204-7%208-1%205-3%206-3%202%200-3%200-3-3-3l-4-2-3-1%203-1c6-1%2010-6%2010-11%200-4%200-5%204-8%201-2%204-3%205-3%202%200%201-2-3-6l-3-3%203-2c3-2%204-3%204-5s1-3%203%200c2%201%202%201%205-1%202-3%202-8%200-13-2-3-8-4-11-2-1%201-1%200-1-3s0-5-2-6l-2-4c-1-2-6-3-11-3l-5%203m217%2017c-4%204%200%2016%206%2016l4%202%204%201%203%201%204%203c2%200%203%202%204%203l1%201c0-2%204-1%205%201%200%202%201%202%203%202%202-1%202-1%203%202v3c-1%201%202%203%205%203%202%200%2012-9%2012-11h-1c-3%202-9%200-42-16-11-5-12-6-10-10%202-3%201-3-1-1M180%2080l-3%201c-4%200-10%203-11%205%200%203%200%204%201%203l1%201h4l6%201c3%202%204%200%204-7%200-5-1-6-2-4M26%2085l-3%203-5%201-5%201%202%201c3-1%205%201%206%205%200%203%200%204-2%204v1c4%201%207%208%204%2010-2%200-1%202%200%201l3-3%205-4c4-2%204-2%202-2l-6-3c-4-5-4-9%200-12%204-4%204-4-1-3m164%2028l-2%206c0%203%203%208%204%208l1%202c0%201%201%201%203-2%203-3%203-4%203-9%200-10-5-13-9-5m51%201l-2%202v1l-1%202-1%203c0%204%209%205%2013%203l2-3v-2c1-2%200-5-2-4h-1c0-4-7-5-8-2m-114%2017l-8%201c-7%200-9%201-11%206-3%204-2%207%200%209s2%202%204%201h3c1%202%206%203%209%201s3-3%203-6l2-8c2-3%202-3%200-4h-2m7%203c-4%202-5%206-4%2011%201%204%201%204%207%206l6%201%201-5c1-11-3-16-10-13m-65%204H59c-7%201-11%204-11%209l-3%2010c0-4-7%202-8%207l2%206%203%202-3%204c-3%204-4%206-2%206l2%202c4%208%2016%205%2017-5%201-7-1-9-7-9h-4l4-2%2010-2c5%200%206-1%209-3%202-3%203-8%201-6-2%200-1-2%201-3%201-2%200-5-4-8l-2-4h7c0%201%204%202%207%201l2-1v-1c1-2%201-2-1-3-3-2-8-2-10%200m29%208c-5%202-5%203-5%2025-1%2010%201%2013%207%2013%203%200%203%200%202%202l-1%202c0%202%204%201%206%200l6-2c13%200%2020-9%2013-17-3-3-4-3-7-3-4%201-4%201-3-1%202-5-1-14-4-14l-5-2c-3-3-7-4-9-3m207%200l-3%204c-5%203-3%206%204%208l9%202%203%202c1%205%202%202%201-3%200-6-5-13-7-11v-1l-1-1h-6m-230%207c-4%204-5%2010-2%2012l3%202-5-1c-5%200-10%201-11%205-2%203-3%2015-1%2016%202%202%2017-2%2020-5s3-8-1-12c-3-2-3-3-1-3%206%202%207%202%209%200s2-3%201-5l-1-5c0-6-1-7-5-7l-6%203m57%202c-8%203-10%207-5%2013l4%206c2%204%202%204%207-1%207-7%208-13%204-18-3-2-5-3-10%200m168%2012c-1%201-2%203-1%204l-2%203c-4%205%205%207%2012%203%203-2%206-6%204-6l-1-2c0-2%200-2-2-2h-5c-3-2-3-2-5%200m-173%2021c-3%203-4%208-2%2012s2%204%207%204c7-1%2013-8%209-11v-1c2-4-11-8-14-4m-116%208c-5%202-7%2012-2%2013h7c4-1%206-2%207-1%203%201%203%201%202-3l-3-6-5-2c-2-3-3-3-6-1m124%2011l-4%201c-2-1-7%204-8%209%200%203%200%204%204%207l5%204%205%202c5%202%206%201%206-6%201-12-3-20-8-17M6%20216c-4%204-4%208%201%2013%203%203%204%204%207%204s10-3%2010-5c1-5-1-9-4-7l-3-2-4-2-1-2c1-3-2-2-6%201m272-1c0%202%200%202-1%201-2-2-2-2-5%200l-4%202%202%205c1%204%201%205%204%205%204%200%204-2%201-4-2-1-3-4-1-4l1-1v-1l1%201c0%202%204%206%204%205v2c0%203%200%203%202%202l2-3%201-1c2%200%201-4-2-6l-3-3-1-1c-2-1-2-1-1%201m-29%209c0%205%202%2012%204%2013l2%201c6-9%207-13%204-15h-9c-1-1-1%200-1%201m70%207c0%202-2%203-8%202-1%200-6%204-6%206l10%205v1c-3%201%200%202%204%202%202%200%202%200%201-1-2-1-2-1%200-3l5-2v-6l-1-3-2-2c-2-1-2-1-3%201m-191%200c-2%202-5%2011-4%2012%207%205%2017-3%2012-10-1-3-5-4-8-2m58%201h-2l-2%204c-3%2010%202%2013%2010%207%203-2%204-3%203-5-1-3-1-3-3-2-1%201-1%201-1-1%200-1%200-2-1-1l-3-1c0-2-1-2-1-1m94%203c-1%200%203%207%206%209%202%201%208%202%2011%201l1-1v-1c1-2%201-2-2-2h-3l-3-1c-2%200-2%200-1-2%202-1%202-1-1-2l-3-1h-5&#x27;%20fill=&#x27;%23d3d3d3&#x27;%20fill-rule=&#x27;evenodd&#x27;/%3e%3c/svg%3e" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/b4a4310e8e622d208e0929005ca4dc98/e4875/cover.webp 1040w,
/static/b4a4310e8e622d208e0929005ca4dc98/ecdd3/cover.webp 2080w,
/static/b4a4310e8e622d208e0929005ca4dc98/38e42/cover.webp 3264w" sizes="(max-width: 3264px) 100vw, 3264px" /><source srcset="/static/b4a4310e8e622d208e0929005ca4dc98/d5c54/cover.jpg 1040w,
/static/b4a4310e8e622d208e0929005ca4dc98/f734f/cover.jpg 2080w,
/static/b4a4310e8e622d208e0929005ca4dc98/e07e8/cover.jpg 3264w" sizes="(max-width: 3264px) 100vw, 3264px" /><img loading="lazy" sizes="(max-width: 3264px) 100vw, 3264px" srcset="/static/b4a4310e8e622d208e0929005ca4dc98/d5c54/cover.jpg 1040w,
/static/b4a4310e8e622d208e0929005ca4dc98/f734f/cover.jpg 2080w,
/static/b4a4310e8e622d208e0929005ca4dc98/e07e8/cover.jpg 3264w" src="/static/b4a4310e8e622d208e0929005ca4dc98/e07e8/cover.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><figcaption><a href="https://unsplash.com/photos/JXqMjodZ0uM" target="_blank" rel="noopener noreferrer">Photo by <!-- -->Bodie Pyndus</a></figcaption></figure><div><p>I have been following the community around
<a href="https://testing-library.com/react" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">react-testing-library</code></a> for a while now.
One of the questions that come up more often is how to test a custom select
component.</p>
<p>By <em>custom select</em> I mean a component like
<a href="https://react-select.com/home" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">react-select</code>'s</a>,
<a href="https://ant.design/components/select/" target="_blank" rel="nofollow noopener noreferrer">Ant Design's</a> or
<a href="https://material-ui.com/api/select/" target="_blank" rel="nofollow noopener noreferrer">Material-UI's</a>.</p>
<figure>
  <a href="https://material-ui.com/demos/selects/" target="_blank">
    <img src="/b89584d7cf517fca25b8c5235fce5ec2/selects.gif" title="Material-UI&apos;s select">
  </a>
  <figcaption>Material-UI&apos;s select</figcaption>
</figure>
<p>A large number of projects need a custom select. At first sight, they seem
simple components, but in reality, they are quite complex. They need to take
care of many use-cases and support accessibility features.</p>
<hr>
<p>Suppose you wrote a new component that uses <code class="language-text">react-select</code>:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">MySelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">"red"</span><span class="token punctuation">,</span> label<span class="token operator">:</span> <span class="token string">"Red"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">"green"</span><span class="token punctuation">,</span> label<span class="token operator">:</span> <span class="token string">"Green"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> label<span class="token operator">:</span> <span class="token string">"Blue"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>color<span class="token punctuation">,</span> setColor<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span>options<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Your favorite color is </span><span class="token punctuation">{</span>color<span class="token punctuation">.</span>label<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Select</span></span>
        <span class="token attr-name">options</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>options<span class="token punctuation">}</span></span>
        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>color<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">setColor</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<figure>
  <img src="/b809e7c7ebdfcd1c6bbba3c5ee901a71/custom-select.gif" title="MySelector in action">
  <figcaption><code>MySelector</code> in action</figcaption>
</figure>
<p>Testing <code class="language-text">MySelector</code> is not as easy at it seems:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Naive test that doesn't work"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MySelector</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">"Your favorite color is Red"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInTheDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  fireEvent<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">"Red"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  fireEvent<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">"Green"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">"Your favorite color is Green"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInTheDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">react-select</code> is trying to be smart to give us the best user-experience
possible. However, all this extra logic makes testing harder.</p>
<p>You now have two options.</p>
<p>You can figure out what DOM structure <code class="language-text">react-select</code> creates and then use
<code class="language-text">container.querySelector</code> to find its elements and interact with them. It takes
a while, but it should be possible. After you have done all of that, you have to
hope that at every new release the <code class="language-text">react-select</code> team doesn't change the DOM
structure too much or you might have to update all your tests.</p>
<p>The other option is to trust that <code class="language-text">react-select</code> is going to make a component
that works and that your users can use. Based on that trust you can replace that
component in your tests for a simpler one.</p>
<p>In my experience, the second option works well and is much easier to maintain.</p>
<hr>
<p>How do you replace the custom select for an easier one though? With
<a href="https://jestjs.io/docs/en/jest-object#jestmockmodulename-factory-options" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">jest.mock</code></a>.</p>
<p>In our case we want to replace <code class="language-text">react-select</code> for a normal HTML <code class="language-text">&lt;select&gt;</code> tag.
Here's how you can do it:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line">jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">"react-select"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> options<span class="token punctuation">,</span> value<span class="token punctuation">,</span> onChange <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> option <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token operator">=></span> option<span class="token punctuation">.</span>value <span class="token operator">===</span> event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>value</span><span class="gatsby-highlight-code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token function">onChange</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">data-testid</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>select<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token punctuation">{</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> label<span class="token punctuation">,</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="gatsby-highlight-code-line"><span class="token plain-text">          </span><span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token plain-text"></span></span><span class="gatsby-highlight-code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span></span><span class="gatsby-highlight-code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"Test with mock"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MySelector</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">"Your favorite color is Red"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInTheDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  fireEvent<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByTestId</span><span class="token punctuation">(</span><span class="token string">"select"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    target<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">"green"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>  <span class="token function">expect</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">"Your favorite color is Green"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInTheDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>I've added a <code class="language-text">data-testid</code> to make it easy to find the <code class="language-text">&lt;select&gt;</code> and
implemented a <code class="language-text">handleChange</code> handler that simulates the one from <code class="language-text">react-select</code>.
Your logic might change depending on what custom select you are using but the
basic idea is the same.</p>
<p>You can find the full code for this example at
<a href="https://github.com/Gpx/test-custom-select" target="_blank" rel="nofollow noopener noreferrer">Gpx/test-custom-select</a>.</p></div></article><footer class="blog-post__Footer-sc-7gkdnd-1 duvUWk">Would you like to have a civil discussion about this post? Hit me up on<!-- --> <a href="https://twitter.com/Gpx" target="_blank" rel="noopener noreferrer">twitter</a>.</footer></div><div class="newsletter-form__Card-a2ms4a-0 fscSeJ"><h1 class="newsletter-form__Title-a2ms4a-3 KHPza">Subscribe to my newsletter</h1><div class="newsletter-form__Sub-a2ms4a-4 cocZZB">No spam. Unsubscribe when you want.</div><form action="https://buttondown.email/api/emails/embed-subscribe/gpx" method="post" target="popupwindow" class="newsletter-form__Form-a2ms4a-2 kvNPcB"><div class="newsletter-form__InputGroup-a2ms4a-5 dYhHPN"><label for="bd-email">Email</label><input type="email" name="email" id="bd-email" placeholder="Your email" required=""/><input type="submit" value="Subscribe" class="newsletter-form__Button-a2ms4a-1 eyKXbm"/></div><input type="hidden" value="1" name="embed"/></form></div><div class="footer__Container-sc-1abtvul-0 jBIpkR"><div class="footer__Content-sc-1abtvul-1 ihWmWm"><a href="/">Home</a>·<a href="/rss.xml">RSS</a>·<a href="https://twitter.com/Gpx" target="_blank" rel="noopener noreferrer">Twitter</a>·<a href="https://github.com/Gpx" target="_blank" rel="noopener noreferrer">GitHub</a></div><div class="footer__Copy-sc-1abtvul-2 bcrfyt">© 2014–<!-- -->2020<!-- --> Giorgio Polvara</div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-40681255-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/testing-a-custom-select-with-react-testing-library/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-04a92f08d6fc44f9844d.js"],"component---src-pages-index-js":["/component---src-pages-index-js-e30b8e87a4bdbd393cf0.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-823b0b2f1756e4d4d7a7.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-823b0b2f1756e4d4d7a7.js" async=""></script><script src="/cd7d5f864fc9e15ed8adef086269b0aeff617554-b178ff70968fed9b073a.js" async=""></script><script src="/styles-b729c27faa6284e9ff45.js" async=""></script><script src="/app-04a92f08d6fc44f9844d.js" async=""></script><script src="/framework-c88d07efb40e009babfb.js" async=""></script><script src="/webpack-runtime-109c4be61e355b7b21f8.js" async=""></script></body></html>